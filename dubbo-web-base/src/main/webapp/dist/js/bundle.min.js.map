{"version":3,"sources":["bundle.min.js"],"names":["getSelectedList","ids","$","each","push","this","val","angular","module","app","factory","$q","$injector","responseError","response","status","rootScope","get","sessionStorage","removeItem","$state","go","notify","message","type","placement","align","reject","request","config","token","getItem","headers","requestError","$controllerProvider","$compileProvider","$filterProvider","$provide","$locationProvider","$httpProvider","controller","register","directive","filter","service","constant","value","defaults","put","post","transformRequest","data","isObject","String","param","interceptors","$timeout","restrict","link","scope","element","attr","$last","$emit","attrs","$eval","onRepeatFinish","decorator","$delegate","exception","cause","setTimeout","run","$rootScope","$stateParams","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","$scope","name","$on","event","toState","toParams","fromState","fromParams","preventDefault","$http","host","SweetAlert","submit","check","length","newPwd","password","oldPwd","success","d","code","logout","swal","msg","$modal","depts","deptMap","map","i","id","classes","dataTable","add","open","$modalInstance","clazz","ok","close","reload","cancel","dismiss","size","del","title","text","showCancelButton","confirmButtonColor","closeOnConfirm","edit","deptId","courses","course","dept","curState","current","renderTable","gradeMap","grades","cid","grade","students","classesMap","sid","record","e","target","isNaN","user","localStorage","JSON","parse","role","prop","stringify","error","teachers","tc","tid","select","classMap","student","changeDept","classId","unselect","teacher"],"mappings":"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","file":"bundle.min.js","sourcesContent":["'use strict';\r\n\r\n\r\nangular.module('app', [\r\n    'ngAnimate',\r\n    'ngCookies',\r\n    'ngResource',\r\n    'ngSanitize',\r\n    'ngTouch',\r\n    'ngStorage',\r\n    'ui.router',\r\n    'ui.bootstrap',\r\n    'oc.lazyLoad',\r\n    'oitozero.ngSweetAlert'\r\n]);\n// config\r\n\r\nvar app = angular.module('app');\r\napp.factory('httpInterceptor', [ '$q', '$injector',function($q, $injector) {\r\n    return {\r\n        'responseError': function (response) {\r\n            if (response.status == 401) {\r\n                var rootScope = $injector.get('$rootScope');\r\n                sessionStorage.removeItem('token');\r\n                rootScope.$state.go('signin');\r\n                $.notify({\r\n                    message: \"<div style='text-align: center'><i class='fa fa-warning'></i> 身份验证异常，请重新登录！</div>\"\r\n                },{\r\n                    type:\"danger\",\r\n                    placement:{\r\n                        align:\"center\"\r\n                    }\r\n                });\r\n            }\r\n            return $q.reject(response);\r\n        },\r\n        'response': function (response) {\r\n            return response;\r\n        },\r\n        'request': function (config) {\r\n            var token;\r\n            if (token = sessionStorage.getItem('token'))\r\n                config.headers['Authorization'] = token;\r\n            return config;\r\n        },\r\n        'requestError': function (config) {\r\n            return $q.reject(config);\r\n        }\r\n    };\r\n}]);\r\n\r\napp.config(\r\n    [        '$controllerProvider', '$compileProvider', '$filterProvider', '$provide', '$locationProvider','$httpProvider',\r\n    function ($controllerProvider,   $compileProvider,   $filterProvider,   $provide ,$locationProvider, $httpProvider) {\r\n        // lazy controller, directive and service\r\n        app.controller = $controllerProvider.register;\r\n        app.directive  = $compileProvider.directive;\r\n        app.filter     = $filterProvider.register;\r\n        app.factory    = $provide.factory;\r\n        app.service    = $provide.service;\r\n        app.constant   = $provide.constant;\r\n        app.value      = $provide.value;\r\n        $httpProvider.defaults.headers.put['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\r\n        $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\r\n\r\n        $httpProvider.defaults.transformRequest = function (data) {\r\n            return angular.isObject(data) && String(data) !== '[object File]' ? $.param(data) : data;\r\n        };\r\n        // $locationProvider.html5Mode(true);\r\n        $httpProvider.interceptors.push('httpInterceptor');\r\n    }\r\n  ]);\r\n\r\napp.constant('host','');\n/**\r\n * Created by fangxw on 2016/4/27.\r\n */\r\n/**\r\n * 当ng-repeat渲染完成页面后的广播事件\r\n */\r\napp.directive('onFinishRenderFilters', [\"$timeout\", function ($timeout) {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attr) {\r\n\t\t\tif (scope.$last === true) {\r\n\t\t\t\t$timeout(function() {\r\n\t\t\t\t\tscope.$emit('ngRepeatFinished');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}]);\r\n/**\r\n * 第一个指令的加强版，可以同个页面不同循环处理\r\n */\r\napp.directive('onRepeatFinish', [\"$timeout\", function($timeout) {\r\n\treturn {\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tif (scope.$last) {                   // 这个判断意味着最后一个 OK\r\n\t\t\t\t$timeout(function() {\r\n\t\t\t\t\tscope.$eval(attrs.onRepeatFinish);    // 执行绑定的表达式\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}]);\r\napp.config([\"$provide\", function($provide) {\r\n\r\n\t// Fix sourcemaps\r\n\t// @url https://github.com/angular/angular.js/issues/5217#issuecomment-50993513\r\n\t$provide.decorator('$exceptionHandler', [\"$delegate\", function($delegate) {\r\n\t\treturn function(exception, cause) {\r\n\t\t\t$delegate(exception, cause);\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tthrow exception;\r\n\t\t\t});\r\n\t\t};\r\n\t}]);\r\n\r\n}]);\r\nfunction getSelectedList() {\r\n\tvar ids = [];\r\n\t$(\"input[name=list]:checked\").each(function () {\r\n\t\tids.push($(this).val())\r\n\t});\r\n\treturn ids;\r\n}\n'use strict';\r\n\r\n/**\r\n * Config for the router\r\n */\r\nangular.module('app')\r\n    .run(\r\n        [          '$rootScope', '$state', '$stateParams',\r\n            function ($rootScope,   $state,   $stateParams) {\r\n                $rootScope.$state = $state;\r\n                $rootScope.$stateParams = $stateParams;\r\n            }\r\n        ]\r\n    )\r\n    .config(\r\n        [          '$stateProvider', '$urlRouterProvider',\r\n            function ($stateProvider,   $urlRouterProvider) {\r\n\r\n                $urlRouterProvider\r\n                    .otherwise('/signin');\r\n                $stateProvider\r\n                    .state('signin', {\r\n                        controller: 'SigninCtrl',\r\n                        url: '/signin',\r\n                        templateUrl: 'tpl/signin.html'\r\n                    })\r\n                    .state('app', {\r\n                        controller: 'GlobalCtrl',\r\n                        url: '/app',\r\n                        templateUrl: 'tpl/app.html'\r\n                    })\r\n                    .state('app.admin', {\r\n                        url: '/admin',\r\n                        templateUrl: 'tpl/admin/admin.html'\r\n                    })\r\n                    .state('app.teacher', {\r\n                        url: '/teacher',\r\n                        templateUrl: 'tpl/teacher/teacher.html'\r\n                    })\r\n                    .state('app.student', {\r\n                        url: '/student',\r\n                        templateUrl: 'tpl/student/student.html'\r\n                    })\r\n                    .state('app.teacher.allCourse', {\r\n                        controller: 'TeacherAllCourseCtrl',\r\n                        url: '/allCourse',\r\n                        templateUrl: 'tpl/teacher/all-course.html'\r\n                    })\r\n                    .state('app.teacher.myCourse', {\r\n                        controller: 'TeacherMyCourseCtrl',\r\n                        url: '/myCourse',\r\n                        templateUrl: 'tpl/teacher/my-course.html'\r\n                    })\r\n                    .state('app.student.allCourse', {\r\n                        controller: 'StudentAllCourseCtrl',\r\n                        url: '/allCourse',\r\n                        templateUrl: 'tpl/student/all-course.html'\r\n                    })\r\n                    .state('app.student.myCourse', {\r\n                        controller: 'StudentMyCourseCtrl',\r\n                        url: '/myCourse',\r\n                        templateUrl: 'tpl/student/my-course.html'\r\n                    })\r\n                    .state('app.admin.dept', {\r\n                        controller: 'DeptCtrl',\r\n                        url: '/dept',\r\n                        templateUrl: 'tpl/admin/dept.html'\r\n                    })\r\n                    .state('app.admin.class', {\r\n                        controller: 'ClassCtrl',\r\n                        url: '/class',\r\n                        templateUrl: 'tpl/admin/class.html'\r\n                    })\r\n                    .state('app.admin.teacher', {\r\n                        controller: 'TeacherManageCtrl',\r\n                        url: '/teacher',\r\n                        templateUrl: 'tpl/admin/teacher.html'\r\n                    })\r\n                    .state('app.admin.student', {\r\n                        controller: 'StudentManageCtrl',\r\n                        url: '/student',\r\n                        templateUrl: 'tpl/admin/student.html'\r\n                    })\r\n                    .state('app.admin.course', {\r\n                        controller: 'CourseManageCtrl',\r\n                        url: '/course',\r\n                        templateUrl: 'tpl/admin/course.html'\r\n                    })\r\n                    .state('app.admin.password', {\r\n                        controller: 'ChangePwdCtrl',\r\n                        url: '/password',\r\n                        templateUrl: 'tpl/common/change-pwd.html'\r\n                    })\r\n                    .state('app.teacher.password', {\r\n                        controller: 'ChangePwdCtrl',\r\n                        url: '/password',\r\n                        templateUrl: 'tpl/common/change-pwd.html'\r\n                    })\r\n                    .state('app.student.password', {\r\n                        controller: 'ChangePwdCtrl',\r\n                        url: '/password',\r\n                        templateUrl: 'tpl/common/change-pwd.html'\r\n                    })\r\n                    .state('app.teacher.grade', {\r\n                        controller: 'RecordGradeCtrl',\r\n                        url: '/recordGrade/:cid',\r\n                        templateUrl: 'tpl/teacher/grade.html'\r\n                    })\r\n                    .state('app.student.grade', {\r\n                        controller: 'QueryGradeCtrl',\r\n                        url: '/queryGrade/:cid',\r\n                        templateUrl: 'tpl/student/grade.html'\r\n                    })\r\n            }\r\n        ]\r\n    );\n/**\r\n * Created by fangf on 2016/5/22.\r\n */\r\napp.controller(\"AppCtrl\",[\"$scope\", \"$state\", function ($scope,$state) {\r\n    $scope.app = {\r\n        name:\" ZHKU选课管理系统 \"\r\n    };\r\n    $scope.$on('$stateChangeStart',\r\n        function(event, toState, toParams, fromState, fromParams){\r\n            if (toState.name!=='signin' && !sessionStorage.getItem('token')) {\r\n                event.preventDefault();\r\n                $state.go('signin');\r\n            }\r\n        })\r\n}]);\n/**\r\n * Created by fangf on 2016/5/21.\r\n */\r\napp.controller('ChangePwdCtrl',[\"$scope\", \"$http\", \"host\", \"$timeout\", \"SweetAlert\", \"$state\", function ($scope,$http,host,$timeout,SweetAlert,$state) {\r\n    $scope.submit = function () {\r\n        $scope.check = true;\r\n        $timeout(function () {\r\n            if ($(\"form .has-error\").length>0)\r\n                return;\r\n            $http.post(host+\"Access/changePwd\",{newPwd:$scope.password,oldPwd:$scope.oldPwd})\r\n                .success(function (d) {\r\n                    if (d.code==1){\r\n                        $scope.logout();\r\n                        SweetAlert.swal('修改成功','修改密码成功，请重新登录。','success');\r\n                        $state.go('signin')\r\n                    } else SweetAlert.swal('修改失败',d.msg,'error');\r\n                });\r\n        },100)\r\n    }\r\n}]);\n/**\r\n * Created by fangf on 2016/5/20.\r\n */\r\napp.controller('ClassCtrl',[\"$scope\", \"$modal\", \"$http\", \"host\", \"$state\", \"SweetAlert\", \"$timeout\", function ($scope,$modal,$http,host,$state,SweetAlert,$timeout) {\r\n    var depts = [];\r\n    $http.get(host+'Admin/dept/getAll').success(function (d) {\r\n        if (d.code==1) {\r\n            depts = d.data;\r\n            $scope.deptMap = {};\r\n            d.data.map(function (i) {\r\n                $scope.deptMap[i.id] = i.name;\r\n            });\r\n        }\r\n    });\r\n    $http.get(host+'Admin/class/getAll').success(function (d) {\r\n        if (d.code==1)\r\n            $scope.classes = d.data;\r\n        if (d.data.length==0) $('.table').dataTable();\r\n    });\r\n    $scope.add = function () {\r\n        $modal.open({\r\n            templateUrl: 'add.html',\r\n            controller: [\"$scope\", \"$modalInstance\", function($scope,$modalInstance){\r\n                $scope.depts = depts;\r\n                $scope.clazz = {};\r\n                $scope.ok = function(){\r\n                    $scope.check = true;\r\n                    $timeout(function () {\r\n                        if ($('form .has-error').length>0)\r\n                            return;\r\n                        $http.post(host+'Admin/class/add',$scope.clazz).success(function (d) {\r\n                            if (d.code==1)\r\n                                SweetAlert.swal(\"增加成功\", \"新增“\"+$scope.clazz.name+\"”\", \"success\");\r\n                            else\r\n                                SweetAlert.swal(\"增加失败\", d.msg, \"error\");\r\n                            $modalInstance.close();\r\n                            $state.reload();\r\n                        });\r\n                    },100)\r\n                };\r\n                $scope.cancel = function(){\r\n                    $modalInstance.dismiss();\r\n                }\r\n            }],\r\n            size: 'md'\r\n        });\r\n    };\r\n    $scope.del = function () {\r\n        var ids = getSelectedList().map(function (i) {\r\n            return $scope.classes[i].id;\r\n        });\r\n        if (ids.length==0){\r\n            SweetAlert.swal(\"提示\", \"请选择删除的班级\", \"warning\");\r\n            return;\r\n        }\r\n        SweetAlert.swal({\r\n                title: \"提示\",\r\n                text: \"是否确定删除选中的班级？\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                closeOnConfirm: false},\r\n            function(ok){\r\n                if (ok) {\r\n                    $http.post(host+'Admin/class/del',{ids:ids}).success(function (d) {\r\n                        if (d.code==1){\r\n                            SweetAlert.swal(\"删除成功\", \"成功删除选中的班级\", \"success\");\r\n                            $state.reload();\r\n                        }\r\n                        else\r\n                            SweetAlert.swal(\"删除失败\", d.msg, \"error\");\r\n                    });\r\n                }\r\n            });\r\n    };\r\n    $scope.edit = function () {\r\n        var ids = getSelectedList();\r\n        if (getSelectedList().length!=1){\r\n            SweetAlert.swal(\"提示\", \"请选择一个编辑的班级\", \"warning\");\r\n            return;\r\n        }\r\n        var id = ids[0];\r\n        var clazz = $scope.classes[id];\r\n        $modal.open({\r\n            templateUrl: 'add.html',\r\n            controller: [\"$scope\", \"$modalInstance\", function($scope,$modalInstance){\r\n                $scope.depts = depts;\r\n                $scope.clazz = clazz;\r\n                $scope.ok = function(){\r\n                    $scope.check = true;\r\n                    if (!$scope.clazz.name||!$scope.clazz.deptId)\r\n                        return;\r\n                    $http.post(host+'Admin/class/upd',$scope.clazz).success(function (d) {\r\n                        if (d.code==1) {\r\n                            SweetAlert.swal(\"编辑成功\", \"\", \"success\");\r\n                            $state.reload()\r\n                        }\r\n                        else\r\n                            SweetAlert.swal(\"编辑失败\", d.msg, \"error\");\r\n                        $modalInstance.close();\r\n                        $state.reload();\r\n                    });\r\n                };\r\n                $scope.cancel = function(){\r\n                    $modalInstance.dismiss();\r\n                }\r\n            }],\r\n            size: 'md'\r\n        });\r\n    };\r\n}]);\n/**\r\n * Created by fangf on 2016/5/21.\r\n */\r\napp.controller('CourseManageCtrl',[\"$scope\", \"$modal\", \"$http\", \"host\", \"$state\", \"SweetAlert\", \"$timeout\", function ($scope,$modal,$http,host,$state,SweetAlert,$timeout) {\r\n    $http.get(host+'Admin/course/getAll').success(function (d) {\r\n        if (d.code==1)\r\n            $scope.courses = d.data;\r\n        if (d.data.length==0) $('.table').dataTable();\r\n    });\r\n    $scope.add = function () {\r\n        $modal.open({\r\n            templateUrl: 'add.html',\r\n            controller: [\"$scope\", \"$modalInstance\", function($scope,$modalInstance){\r\n                $scope.course = {};\r\n                $scope.ok = function(){\r\n                    $scope.check = true;\r\n                    $timeout(function () {\r\n                        if ($('form .has-error').length>0)\r\n                            return;\r\n                        $http.post(host+'Admin/course/add',$scope.course).success(function (d) {\r\n                            if (d.code==1)\r\n                                SweetAlert.swal(\"增加成功\", \"新增“\"+$scope.course.name+\"”\", \"success\");\r\n                            else\r\n                                SweetAlert.swal(\"增加失败\", d.msg, \"error\");\r\n                            $modalInstance.close();\r\n                            $state.reload();\r\n                        });\r\n                    },100)\r\n                };\r\n                $scope.cancel = function(){\r\n                    $modalInstance.dismiss();\r\n                }\r\n            }],\r\n            size: 'md'\r\n        });\r\n    };\r\n    $scope.del = function () {\r\n        var ids = getSelectedList().map(function (i) {\r\n            return $scope.courses[i].id;\r\n        });\r\n        if (ids.length==0){\r\n            SweetAlert.swal(\"提示\", \"请选择删除的课程\", \"warning\");\r\n            return;\r\n        }\r\n        SweetAlert.swal({\r\n                title: \"提示\",\r\n                text: \"是否确定删除选中的课程？\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                closeOnConfirm: false},\r\n            function(ok){\r\n                if (ok) {\r\n                    $http.post(host+'Admin/course/del',{ids:ids}).success(function (d) {\r\n                        if (d.code==1){\r\n                            SweetAlert.swal(\"删除成功\", \"成功删除选中的课程\", \"success\");\r\n                            $state.reload();\r\n                        }\r\n                        else\r\n                            SweetAlert.swal(\"删除失败\", d.msg, \"error\");\r\n                    });\r\n                }\r\n            });\r\n    };\r\n    $scope.edit = function () {\r\n        var ids = getSelectedList();\r\n        if (getSelectedList().length!=1){\r\n            SweetAlert.swal(\"提示\", \"请选择一个编辑的课程\", \"warning\");\r\n            return;\r\n        }\r\n        var id = ids[0];\r\n        var course = $scope.courses[id];\r\n        $modal.open({\r\n            templateUrl: 'add.html',\r\n            controller: [\"$scope\", \"$modalInstance\", function($scope,$modalInstance){\r\n                $scope.course = course;\r\n                $scope.ok = function(){\r\n                    $scope.check = true;\r\n                    $timeout(function () {\r\n                        if ($('form .has-error').length>0)\r\n                            return;\r\n                        $http.post(host+'Admin/course/upd',$scope.course).success(function (d) {\r\n                            if (d.code==1) {\r\n                                SweetAlert.swal(\"编辑成功\", \"\", \"success\");\r\n                                $state.reload()\r\n                            }\r\n                            else\r\n                                SweetAlert.swal(\"编辑失败\", d.msg, \"error\");\r\n                            $modalInstance.close();\r\n                            $state.reload();\r\n                        });\r\n                    },100)\r\n                };\r\n                $scope.cancel = function(){\r\n                    $modalInstance.dismiss();\r\n                }\r\n            }],\r\n            size: 'md'\r\n        });\r\n    };\r\n}]);\n/**\r\n * Created by fangf on 2016/5/19.\r\n */\r\napp.controller('DeptCtrl',[\"$scope\", \"$modal\", \"$http\", \"host\", \"$state\", \"SweetAlert\", function ($scope,$modal,$http,host,$state,SweetAlert) {\r\n    $http.get(host+'Admin/dept/getAll').success(function (d) {\r\n        if (d.code==1)\r\n            $scope.depts = d.data;\r\n        if (d.data.length==0) $('.table').dataTable();\r\n    });\r\n    $scope.add = function () {\r\n        $modal.open({\r\n            templateUrl: 'add.html',\r\n            controller: [\"$scope\", \"$modalInstance\", function($scope,$modalInstance){\r\n                $scope.dept = {};\r\n                $scope.ok = function(){\r\n                    $scope.check = true;\r\n                    if (!$scope.dept.name)\r\n                        return;\r\n                    $http.post(host+'Admin/dept/add',$scope.dept).success(function (d) {\r\n                        if (d.code==1)\r\n                            SweetAlert.swal(\"增加成功\", \"新增“\"+$scope.dept.name+\"”\", \"success\");\r\n                        else\r\n                            SweetAlert.swal(\"增加失败\", d.msg, \"error\");\r\n                        $modalInstance.close();\r\n                        $state.reload();\r\n                    });\r\n                };\r\n                $scope.cancel = function(){\r\n                    $modalInstance.dismiss();\r\n                }\r\n            }],\r\n            size: 'md'\r\n        });\r\n    };\r\n    $scope.del = function () {\r\n        var ids = getSelectedList().map(function (i) {\r\n            return $scope.depts[i].id;\r\n        });\r\n        if (ids.length==0){\r\n            SweetAlert.swal(\"提示\", \"请选择删除的院系\", \"warning\");\r\n            return;\r\n        }\r\n        SweetAlert.swal({\r\n                title: \"提示\",\r\n                text: \"是否确定删除选中的院系？\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                closeOnConfirm: false},\r\n            function(ok){\r\n                if (ok) {\r\n                    $http.post(host+'Admin/dept/del',{ids:ids}).success(function (d) {\r\n                        if (d.code==1){\r\n                            SweetAlert.swal(\"删除成功\", \"成功删除选中的院系\", \"success\");\r\n                            $state.reload();\r\n                        }\r\n                        else\r\n                            SweetAlert.swal(\"删除失败\", d.msg, \"error\");\r\n                    });\r\n                }\r\n            });\r\n    };\r\n    $scope.edit = function () {\r\n        var ids = getSelectedList();\r\n        if (getSelectedList().length!=1){\r\n            SweetAlert.swal(\"提示\", \"请选择一个编辑的院系\", \"warning\");\r\n            return;\r\n        }\r\n        var id = ids[0];\r\n        var dept = $scope.depts[id];\r\n        $modal.open({\r\n            templateUrl: 'add.html',\r\n            controller: [\"$scope\", \"$modalInstance\", function($scope,$modalInstance){\r\n                $scope.dept = dept;\r\n                $scope.ok = function(){\r\n                    $scope.check = true;\r\n                    if (!$scope.dept.name)\r\n                        return;\r\n                    $http.post(host+'Admin/dept/upd',$scope.dept).success(function (d) {\r\n                        if (d.code==1) {\r\n                            SweetAlert.swal(\"编辑成功\", \"\", \"success\");\r\n                            $state.reload()\r\n                        }\r\n                        else\r\n                            SweetAlert.swal(\"编辑失败\", d.msg, \"error\");\r\n                        $modalInstance.close();\r\n                        $state.reload();\r\n                    });\r\n                };\r\n                $scope.cancel = function(){\r\n                    $modalInstance.dismiss();\r\n                }\r\n            }],\r\n            size: 'md'\r\n        });\r\n    };\r\n}]);\n/**\r\n * Created by fangf on 2016/5/19.\r\n */\r\napp.controller('GlobalCtrl',[\"$scope\", \"$state\", function($scope,$state){\r\n    $scope.reload = function () {\r\n        $state.reload();\r\n    };\r\n    $scope.curState = function () {\r\n        return $state.current.name;\r\n    };\r\n    $scope.renderTable = function () {\r\n        $('.table').dataTable();\r\n    };\r\n    $scope.logout = function () {\r\n        sessionStorage.removeItem(\"token\");\r\n        sessionStorage.removeItem(\"userID\");\r\n        sessionStorage.removeItem(\"role\");\r\n    }\r\n}]);\n/**\r\n * Created by fangf on 2016/5/23.\r\n */\r\napp.controller(\"QueryGradeCtrl\",[\"$scope\", \"$http\", \"host\", function ($scope,$http,host) {\r\n    $http.get(host+\"Student/grade/queryGrade\").success(function (d) {\r\n        if (d.code==1){\r\n            $scope.gradeMap = {};\r\n            d.data.grades.map(function (i) {\r\n                $scope.gradeMap[i.cid] = i.grade;\r\n            });\r\n            $scope.courses = d.data.courses.map(function (i) {\r\n                i.grade = $scope.gradeMap[i.id];\r\n                if (i.grade<45) i.status = \"重修\";\r\n                else if (i.grade<60) i.status = \"补考\";\r\n                else if (i.grade<70) i.status = \"及格\";\r\n                else if (i.grade<85) i.status = \"良好\";\r\n                else i.status = \"优秀\";\r\n                return i;\r\n            });\r\n        }\r\n        if ($scope.courses.length==0) $(\".table\").dataTable()\r\n    })\r\n}]);\n/**\r\n * Created by fangf on 2016/5/23.\r\n */\r\napp.controller(\"RecordGradeCtrl\",[\"$scope\", \"$stateParams\", \"$http\", \"host\", \"SweetAlert\", function ($scope,$stateParams,$http,host, SweetAlert) {\r\n    var cid = $stateParams.cid;\r\n    $http.get(host+\"Teacher/grade/findStudentsByCid?id=\"+cid).success(function (d) {\r\n        if (d.code==1){\r\n            $scope.course = d.data.course;\r\n            $scope.students = d.data.students;\r\n        }\r\n        if ($scope.students.length==0) $(\".table\").dataTable();\r\n    });\r\n    $http.get(host+'Teacher/class/getAll').success(function (d) {\r\n        if (d.code==1) {\r\n            $scope.classesMap = {};\r\n            d.data.map(function (i) {\r\n                $scope.classesMap[i.id] = i.name;\r\n            });\r\n        }\r\n    });\r\n    $http.get(host+'Teacher/class/getGradeByCid?id='+cid).success(function (d) {\r\n        if (d.code==1) {\r\n            $scope.gradeMap = {};\r\n            d.data.map(function (i) {\r\n                $scope.gradeMap[i.sid] = i.grade;\r\n            })\r\n        }\r\n    });\r\n    $scope.record = function (e,sid) {\r\n        var grade = $(e.target).val();\r\n        if (grade.length==0) return;\r\n        if (isNaN(grade)||grade<1||grade>100){\r\n            $.notify({\r\n                message: \"<i class='fa fa-warning'></i> 请输入1~100的分数！\"\r\n            },{\r\n                type:\"warning\"\r\n            });\r\n            return;\r\n        }\r\n        $http.post(host+\"Teacher/grade/recordGrade\",{cid:cid,sid:sid,grade:grade}).success(function (d) {\r\n            if (d.code==1){\r\n                $scope.gradeMap[sid] = grade;\r\n            } else SweetAlert.swal(\"登记成绩失败\",d.msg,\"error\");\r\n        })\r\n    };\r\n    $scope.edit = function () {\r\n        getSelectedList().map(function (i) {\r\n            $scope.gradeMap[$scope.students[i].id] = 0\r\n        })\r\n    }\r\n}]);\n/**\r\n * Created by fangf on 2016/5/19.\r\n */\r\napp.controller('SigninCtrl',[\"$scope\", \"$state\", \"host\", \"SweetAlert\", \"$http\", function ($scope,$state,host,SweetAlert,$http) {\r\n    $scope.user = localStorage.user?JSON.parse(localStorage.user):{role:\"student\"};\r\n    $scope.submit = function () {\r\n        $http.post(host+\"Access/signin\",$scope.user).success(function (d) {\r\n            if (d.code==1){\r\n                sessionStorage.token = d.data.token;\r\n                if (d.data.role=='student') //学生账号\r\n                    $state.go('app.student');\r\n                else if (d.data.role=='teacher') //教职工账号\r\n                    $state.go('app.teacher');\r\n                else if (d.data.role=='admin') //教职工账号\r\n                    $state.go('app.admin');\r\n                if ($('#remember').prop('checked'))\r\n                    localStorage.user = JSON.stringify({name:$scope.user.name,role:$scope.user.role});\r\n                else localStorage.removeItem('user');\r\n                SweetAlert.swal(\"登录成功\",\"欢迎登录，\"+d.data.name,'success');\r\n            } else SweetAlert.swal(\"登录失败\",d.msg,'error');\r\n        }).error(function () {\r\n            SweetAlert.swal(\"提示\",\"服务器异常\",'error');\r\n        })\r\n    }\r\n}]);\n/**\r\n * Created by fangf on 2016/5/22.\r\n */\r\napp.controller(\"StudentAllCourseCtrl\",[\"$scope\", \"$http\", \"host\", \"SweetAlert\", function ($scope,$http,host,SweetAlert) {\r\n    $http.get(host+\"Student/course/getAll\").success(function (d) {\r\n        if (d.code==1) {\r\n            $scope.courses = d.data.courses;\r\n            $scope.teachers = {};\r\n            $scope.tc = {};\r\n            d.data.teachers.map(function (i) {\r\n                $scope.teachers[i.id] = i.name;\r\n            });\r\n            d.data.tc.map(function (i) {\r\n                $scope.tc[i.cid] = i.tid;\r\n            });\r\n        }\r\n        if (d.data.courses.length==0) $('.table').dataTable();\r\n    });\r\n    $scope.select = function () {\r\n        var ids = getSelectedList().map(function (i) {\r\n            return $scope.courses[i].id;\r\n        });\r\n        if (ids.length==0){\r\n            SweetAlert.swal(\"提示\", \"请选择课程\", \"warning\");\r\n            return;\r\n        }\r\n        SweetAlert.swal({\r\n                title: \"提示\",\r\n                text: \"请再次确认您的选课信息！\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                closeOnConfirm: false},\r\n            function(ok){\r\n                if (ok)\r\n                    $http.post(host+\"Student/course/selectCourses\",{ids:ids}).success(function (d) {\r\n                        if (d.code==1)\r\n                            SweetAlert.swal(\"选课成功\", \"请到“我的选课”中查看您的选课\",\"success\");\r\n                        else SweetAlert.swal(\"选课失败\", d.msg, \"error\");\r\n                    });\r\n            });\r\n    }\r\n}]);\n/**\r\n * Created by fangf on 2016/5/21.\r\n */\r\napp.controller('StudentManageCtrl',[\"$scope\", \"$modal\", \"$http\", \"host\", \"$state\", \"SweetAlert\", \"$timeout\", function ($scope,$modal,$http,host,$state,SweetAlert,$timeout) {\r\n    var depts = [];\r\n    $http.get(host+'Admin/dept/getAll').success(function (d) {\r\n        if (d.code==1) {\r\n            depts = d.data;\r\n            $scope.deptMap = {};\r\n            d.data.map(function (i) {\r\n                $scope.deptMap[i.id] = i.name;\r\n            });\r\n        }\r\n    });\r\n    var classMap = {};\r\n    $http.get(host+'Admin/class/getAll').success(function (d) {\r\n        if (d.code==1) {\r\n            d.data.map(function (i) {\r\n                if (!classMap[i.deptId])\r\n                    classMap[i.deptId] = [];\r\n                classMap[i.deptId].push(i);\r\n            });\r\n            $scope.classesMap = {};\r\n            d.data.map(function (i) {\r\n                $scope.classesMap[i.id] = i.name;\r\n            });\r\n        }\r\n    });\r\n    $http.get(host+'Admin/student/getAll').success(function (d) {\r\n        if (d.code==1)\r\n            $scope.students = d.data;\r\n        if (d.data.length==0) $('.table').dataTable();\r\n    });\r\n    $scope.add = function () {\r\n        $modal.open({\r\n            templateUrl: 'add.html',\r\n            controller: [\"$scope\", \"$modalInstance\", function($scope,$modalInstance){\r\n                $scope.depts = depts;\r\n                $scope.classMap = classMap;\r\n                $scope.student = {};\r\n                $scope.changeDept = function () {\r\n                    delete $scope.student.classId;\r\n                };\r\n                $scope.ok = function(){\r\n                    $scope.check = true;\r\n                    $timeout(function () {\r\n                        if ($('form .has-error').length>0)\r\n                            return;\r\n                        $http.post(host+'Admin/student/add',$scope.student).success(function (d) {\r\n                            if (d.code==1)\r\n                                SweetAlert.swal(\"增加成功\", \"新增“\"+$scope.student.name+\"”\", \"success\");\r\n                            else\r\n                                SweetAlert.swal(\"增加失败\", d.msg, \"error\");\r\n                            $modalInstance.close();\r\n                            $state.reload();\r\n                        });\r\n                    },100);\r\n                };\r\n                $scope.cancel = function(){\r\n                    $modalInstance.dismiss();\r\n                }\r\n            }],\r\n            size: 'md'\r\n        });\r\n    };\r\n    $scope.del = function () {\r\n        var ids = getSelectedList().map(function (i) {\r\n            return $scope.students[i].id;\r\n        });\r\n        if (ids.length==0){\r\n            SweetAlert.swal(\"提示\", \"请选择删除的学生\", \"warning\");\r\n            return;\r\n        }\r\n        SweetAlert.swal({\r\n                title: \"提示\",\r\n                text: \"是否确定删除选中的学生？\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                closeOnConfirm: false},\r\n            function(ok){\r\n                if (ok) {\r\n                    $http.post(host+'Admin/student/del',{ids:ids}).success(function (d) {\r\n                        if (d.code==1){\r\n                            SweetAlert.swal(\"删除成功\", \"成功删除选中的学生\", \"success\");\r\n                            $state.reload();\r\n                        }\r\n                        else\r\n                            SweetAlert.swal(\"删除失败\", d.msg, \"error\");\r\n                    });\r\n                }\r\n            });\r\n    };\r\n    $scope.edit = function () {\r\n        var ids = getSelectedList();\r\n        if (getSelectedList().length!=1){\r\n            SweetAlert.swal(\"提示\", \"请选择一个编辑的学生\", \"warning\");\r\n            return;\r\n        }\r\n        var id = ids[0];\r\n        var student = $scope.students[id];\r\n        $modal.open({\r\n            templateUrl: 'add.html',\r\n            controller: [\"$scope\", \"$modalInstance\", function($scope,$modalInstance){\r\n                $scope.depts = depts;\r\n                $scope.classMap = classMap;\r\n                $scope.student = student;\r\n                delete $scope.student.password;\r\n                $scope.changeDept = function () {\r\n                    delete $scope.student.classId;\r\n                };\r\n                $scope.ok = function(){\r\n                    $scope.check = true;\r\n                    $timeout(function () {\r\n                        if ($('form .has-error').length>0)\r\n                            return;\r\n                        $http.post(host+'Admin/student/upd',$scope.student).success(function (d) {\r\n                            if (d.code==1) {\r\n                                SweetAlert.swal(\"编辑成功\", \"\", \"success\");\r\n                                $state.reload()\r\n                            }\r\n                            else\r\n                                SweetAlert.swal(\"编辑失败\", d.msg, \"error\");\r\n                            $modalInstance.close();\r\n                        });\r\n                    },100)\r\n                };\r\n                $scope.cancel = function(){\r\n                    $modalInstance.dismiss();\r\n                };\r\n            }],\r\n            size: 'md'\r\n        });\r\n    };\r\n}]);\n/**\r\n * Created by fangf on 2016/5/23.\r\n */\r\napp.controller(\"StudentMyCourseCtrl\",[\"$scope\", \"$http\", \"host\", \"SweetAlert\", \"$state\", function ($scope,$http,host,SweetAlert,$state) {\r\n    $http.get(host+\"Student/course/selectedCourses\").success(function (d) {\r\n        if (d.code==1) {\r\n            $scope.courses = d.data.courses;\r\n            $scope.teachers = {};\r\n            $scope.tc = {};\r\n            d.data.teachers.map(function (i) {\r\n                $scope.teachers[i.id] = i.name;\r\n            });\r\n            d.data.tc.map(function (i) {\r\n                $scope.tc[i.cid] = i.tid;\r\n            });\r\n        }\r\n        if (d.data.courses.length==0) $('.table').dataTable();\r\n    });\r\n    $scope.unselect = function () {\r\n        var ids = getSelectedList().map(function (i) {\r\n            return $scope.courses[i].id;\r\n        });\r\n        if (ids.length==0){\r\n            SweetAlert.swal(\"提示\", \"请选择退选的课程\", \"warning\");\r\n            return;\r\n        }\r\n        SweetAlert.swal({\r\n                title: \"提示\",\r\n                text: \"是否退选选中的课程！\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                closeOnConfirm: false},\r\n            function(ok){\r\n                if (ok)\r\n                    $http.post(host+\"Student/course/unselectCourses\",{ids:ids}).success(function (d) {\r\n                        if (d.code==1) {\r\n                            SweetAlert.swal(\"退选成功\", \"\", \"success\");\r\n                            $state.reload();\r\n                        }\r\n                        else SweetAlert.swal(\"退选失败\", \"\", \"error\");\r\n                    });\r\n            });\r\n    }\r\n}]);\n/**\r\n * Created by fangf on 2016/5/22.\r\n */\r\napp.controller(\"TeacherAllCourseCtrl\",[\"$scope\", \"$http\", \"host\", \"SweetAlert\", function ($scope,$http,host,SweetAlert) {\r\n    $http.get(host+\"Teacher/course/getAll\").success(function (d) {\r\n        if (d.code==1)\r\n            $scope.courses = d.data;\r\n        if (d.data.length==0) $('.table').dataTable();\r\n    });\r\n    $scope.select = function () {\r\n        var ids = getSelectedList().map(function (i) {\r\n            return $scope.courses[i].id;\r\n        });\r\n        if (ids.length==0){\r\n            SweetAlert.swal(\"提示\", \"请选择授课的课程\", \"warning\");\r\n            return;\r\n        }\r\n        SweetAlert.swal({\r\n                title: \"提示\",\r\n                text: \"请再次确认您的授课信息！\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                closeOnConfirm: false},\r\n            function(ok){\r\n                if (ok)\r\n                    $http.post(host+\"Teacher/course/selectCourses\",{ids:ids}).success(function (d) {\r\n                        if (d.code==1) {\r\n                            SweetAlert.swal(\"选择授课成功\", \"请到“我的授课”中查看您的授课\", \"success\");\r\n                            $scope.reload();\r\n                        }\r\n                        else SweetAlert.swal(\"选择授课失败\", d.msg, \"error\");\r\n                    });\r\n            });\r\n    }\r\n}]);\n/**\r\n * Created by fangf on 2016/5/21.\r\n */\r\napp.controller('TeacherManageCtrl',[\"$scope\", \"$modal\", \"$http\", \"host\", \"$state\", \"SweetAlert\", \"$timeout\", function ($scope,$modal,$http,host,$state,SweetAlert,$timeout) {\r\n    var depts = [];\r\n    $http.get(host+'Admin/dept/getAll').success(function (d) {\r\n        if (d.code==1) {\r\n            depts = d.data;\r\n            $scope.deptMap = {};\r\n            d.data.map(function (i) {\r\n                $scope.deptMap[i.id] = i.name;\r\n            });\r\n        }\r\n    });\r\n    $http.get(host+'Admin/teacher/getAll').success(function (d) {\r\n        if (d.code==1)\r\n            $scope.teachers = d.data;\r\n        if (d.data.length==0) $('.table').dataTable();\r\n    });\r\n    $scope.add = function () {\r\n        $modal.open({\r\n            templateUrl: 'add.html',\r\n            controller: [\"$scope\", \"$modalInstance\", function($scope,$modalInstance){\r\n                $scope.depts = depts;\r\n                $scope.teacher = {};\r\n                $scope.ok = function(){\r\n                    $scope.check = true;\r\n                    $timeout(function () {\r\n                        if ($('form .has-error').length>0)\r\n                            return;\r\n                        $http.post(host+'Admin/teacher/add',$scope.teacher).success(function (d) {\r\n                            if (d.code==1)\r\n                                SweetAlert.swal(\"增加成功\", \"新增“\"+$scope.teacher.name+\"”\", \"success\");\r\n                            else\r\n                                SweetAlert.swal(\"增加失败\", d.msg, \"error\");\r\n                            $modalInstance.close();\r\n                            $state.reload();\r\n                        });\r\n                    },100);\r\n                };\r\n                $scope.cancel = function(){\r\n                    $modalInstance.dismiss();\r\n                }\r\n            }],\r\n            size: 'md'\r\n        });\r\n    };\r\n    $scope.del = function () {\r\n        var ids = getSelectedList().map(function (i) {\r\n            return $scope.teachers[i].id;\r\n        });\r\n        if (ids.length==0){\r\n            SweetAlert.swal(\"提示\", \"请选择删除的教职工\", \"warning\");\r\n            return;\r\n        }\r\n        SweetAlert.swal({\r\n                title: \"提示\",\r\n                text: \"是否确定删除选中的教职工？\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                closeOnConfirm: false},\r\n            function(ok){\r\n                if (ok) {\r\n                    $http.post(host+'Admin/teacher/del',{ids:ids}).success(function (d) {\r\n                        if (d.code==1){\r\n                            SweetAlert.swal(\"删除成功\", \"成功删除选中的教职工\", \"success\");\r\n                            $state.reload();\r\n                        }\r\n                        else\r\n                            SweetAlert.swal(\"删除失败\", d.msg, \"error\");\r\n                    });\r\n                }\r\n            });\r\n    };\r\n    $scope.edit = function () {\r\n        var ids = getSelectedList();\r\n        if (getSelectedList().length!=1){\r\n            SweetAlert.swal(\"提示\", \"请选择一个编辑的教职工\", \"warning\");\r\n            return;\r\n        }\r\n        var id = ids[0];\r\n        var teacher = $scope.teachers[id];\r\n        $modal.open({\r\n            templateUrl: 'add.html',\r\n            controller: [\"$scope\", \"$modalInstance\", function($scope,$modalInstance){\r\n                $scope.depts = depts;\r\n                $scope.teacher = teacher;\r\n                delete $scope.teacher.password;\r\n                $scope.ok = function(){\r\n                    $scope.check = true;\r\n                    $timeout(function () {\r\n                        if ($('form .has-error').length>0)\r\n                            return;\r\n                        $http.post(host+'Admin/teacher/upd',$scope.teacher).success(function (d) {\r\n                            if (d.code==1) {\r\n                                SweetAlert.swal(\"编辑成功\", \"\", \"success\");\r\n                                $state.reload()\r\n                            }\r\n                            else\r\n                                SweetAlert.swal(\"编辑失败\", d.msg, \"error\");\r\n                            $modalInstance.close();\r\n                        });\r\n                    },100)\r\n                };\r\n                $scope.cancel = function(){\r\n                    $modalInstance.dismiss();\r\n                }\r\n            }],\r\n            size: 'md'\r\n        });\r\n    };\r\n}]);\n/**\r\n * Created by fangf on 2016/5/22.\r\n */\r\napp.controller(\"TeacherMyCourseCtrl\",[\"$scope\", \"$http\", \"host\", \"SweetAlert\", \"$state\", function ($scope,$http,host,SweetAlert,$state) {\r\n    $http.get(host+\"Teacher/course/selectedCourses\").success(function (d) {\r\n        if (d.code==1)\r\n            $scope.courses = d.data;\r\n        if (d.data.length==0) $('.table').dataTable();\r\n    });\r\n    $scope.unselect = function () {\r\n        var ids = getSelectedList().map(function (i) {\r\n            return $scope.courses[i].id;\r\n        });\r\n        if (ids.length==0){\r\n            SweetAlert.swal(\"提示\", \"请选择取消授课的课程\", \"warning\");\r\n            return;\r\n        }\r\n        SweetAlert.swal({\r\n                title: \"提示\",\r\n                text: \"是否取消选中的课程！\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                closeOnConfirm: false},\r\n            function(ok){\r\n                if (ok)\r\n                $http.post(host+\"Teacher/course/unselectCourses\",{ids:ids}).success(function (d) {\r\n                    if (d.code==1) {\r\n                        SweetAlert.swal(\"取消授课成功\", \"\", \"success\");\r\n                        $state.reload();\r\n                    }\r\n                    else SweetAlert.swal(\"取消授课失败\", \"\", \"error\");\r\n                });\r\n            });\r\n    }\r\n}]);"]}